<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
   <h4 id="heading"></h4>
   <table id="t" border="1"></table>
  </body>
  <script>
    function show() {
      var xhr = new XMLHttpRequest();
      xhr.open('GET', `./quoting.json`, true)
      xhr.responseType = 'json';
      xhr.send();
      xhr.onload = function() {
        console.log(xhr.response);
        var rows = [];
        var columns = [];
        for (var source in xhr.response) {
          var dests = [];
          for (var dest in xhr.response[source]) {
            if (columns.indexOf(dest) === -1) {
              columns.push(dest);
            }
            dests.push({ dest, data: xhr.response[source][dest] });
          }
          dests.sort(function(a, b) {
            return columns.indexOf(a) - columns.indexOf(b);
          });
console.log(dests);
          rows.push(`<tr><td>${source}</td><td>${dests.map(obj => obj.dest + ': ' + obj.data).join('</td><td>')}</td></tr>`);
        }
        document.getElementById('t').innerHTML = rows.join('\n');
      };
    }
    show();
  </script>
</html>
